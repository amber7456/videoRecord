<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<title>资源管理</title>
<link rel="stylesheet" href="layui/css/layui.css">
<script src="js/jquery-2.1.4.js"></script>
<script src="js/jquery.serializejson.js"></script>
<script src="js/img-controller.js"></script>
<script src="layui/layui.js"></script>
<style type="text/css">
.main-height {
	height: 90%; /*写给不支持calc()的浏览器*/
	height: -moz-calc(100% - ( 10px + 5px)* 2);
	height: -webkit-calc(100% - ( 10px + 5px)* 2);
	height: calc(100% - ( 10px + 5px)* 2);
}

.layui-layout-body {
	min-width: 1100px;
	min-height: 800px;
}

.layui-body {
	overflow: hidden;
	min-width: 600px;
}

body {
	margin: 0;
	padding: 0;
}
</style>
</head>

<body class="layui-layout-body">
	<div class="layui-layout layui-layout-admin">
		<div class="layui-header">
			<div class="layui-logo">VideoRecord</div>
		</div>
		<div class="layui-side layui-bg-black">
			<div class="layui-side-scroll">
				<!-- 左侧导航区域（可配合layui已有的垂直导航） -->
				<ul class="layui-nav layui-nav-tree" lay-filter="test">
					<li class="layui-nav-item layui-nav-itemed"><a class=""
						href="javascript:;">动画</a>
						<dl class="layui-nav-child">
							<dd id="firstMenu">
								<a
									href="javascript:clickMenu('htmls/animation/animationList.html');">动画列表</a>
							</dd>
							<dd>
								<a
									href="javascript:clickMenu('htmls/animation/animationAdvSearch.html');">高级检索</a>
							</dd>
							<dd>
								<a
									href="javascript:clickMenu('htmls/animation/animationCharts.html');">图表分析</a>
							</dd>
							<dd>
								<a
									href="javascript:clickMenu('htmls/animation/animationAdd.html');">动画录入</a>
							</dd>
						</dl></li>
					<li class="layui-nav-item"><a
						href="javascript:clickMenu('htmls/disk/diskManage.html');">硬盘管理</a></li>
				</ul>
			</div>
		</div>


		<div class="layui-body" id="layui-body">
			<!-- 内容主体区域 -->
		</div>

		<div class="layui-footer">
			<!-- 底部固定区域 -->
			基于layui2.2.5 © layui.com - 底部固定区域
		</div>
	</div>

	<ul class="layui-fixbar" onclick="backtoTop()"
		style="position: fixed; right: 25px; bottom: 95px; z-index: 9999; display: none;">
		<li class="layui-icon layui-fixbar-top" style="display: list-item;"><i
			class="layui-icon" style="font-size: 40px;">&#xe604;</i></li>
	</ul>
</body>
<script>
	//JavaScript代码区域 
	layui.use([ 'layer', 'element' ], function() {
		var $ = layui.jquery;
		var layer = layui.layer;
		var element = layui.element;

		var firstMenu = document.getElementById('firstMenu'); //获取元素div
		var first = firstMenu.children[0];
		first.click();
		firstMenu.click(); //执行点击事件，这样就模拟出了自动执行点击事件。

		window.callback = function() {
			var iframe2 = document.getElementById('main_frame');
			return iframe2;
		};

		window.sendRequest = function(url, method, data, callback) {
			var index = layer.load(1, {
				shade : [ 0.3, '#fff' ]
			});
			console.log("开启遮罩层" + index);
			$.ajax({
				url : url,
				method : method,
				data : data,
				dataType : "json",
				success : function(resp) {
					if (resp.code == 0) {
						console.log("公共方法返回");
						console.log(resp);
						layer.close(index);
						console.log("关闭遮罩层" + index);
						if (callback != null) {
							console.log("执行参数函数");
							callback(resp);
						} else {
							return resp;
						}
					} else {
						layer.close(index);
						console.log("关闭遮罩层" + index);
						layer.alert(resp.msg, {
							title : '程序异常：'
						})
					}
				},
				error : function(xhr) {
					layer.close(index);
					console.log("关闭遮罩层" + index);
					layer.alert(xhr.status + " " + xhr.statusText, {
						title : '系统异常：'
					})
				}
			});
		};

		window.submitForm = function(url, method, data, callback) {
			console.log("同步方法");
			var index = layer.load(1, {
				shade : [ 0.3, '#fff' ]
			});
			console.log("开启遮罩层" + index);
			$.ajax({
				url : url,
				method : method,
				data : data,
				dataType : "json",
				contentType : "application/json",
				processData : false,
				contentType : false,
				success : function(resp) {
					if (resp.code == 0) {
						console.log("公共方法返回");
						console.log(resp);
						layer.close(index);
						console.log("关闭遮罩层" + index);
						if (callback != null) {
							console.log("执行参数函数");
							callback(resp);
						} else {
							return resp;
						}
					} else {
						layer.close(index);
						console.log("关闭遮罩层" + index);
						layer.alert(resp.msg, {
							title : '程序异常：'
						})
					}
				},
				error : function(xhr) {
					layer.close(index);
					console.log("关闭遮罩层" + index);
					layer.alert(xhr.status + " " + xhr.statusText, {
						title : '系统异常：'
					})
				}
			});
		};

	});

	function clickMenu(local) {

		console.log("加载地址：" + local);

		var iframe = "<iframe id='main_frame' name='main_frame' height='100%' width='100%' border='0' frameborder='0' scrolling='auto' src='"
				+ local
				+ "?t="
				+ (new Date()).getTime().toString()
				+ "'></iframe>";

		$(".layui-body").html(iframe);
		$(".layui-body").scrollTop(0);

	}

	function loadHtml(local, loadBody) {
		console.log(loadBody + ":" + local);
		htmlobj = $.ajax({
			url : local + "?t=" + (new Date()).getTime().toString(),
			method : "post",
			cache : false,
			dataType : "html",
			async : false,
			error : function(xhr) {
				layer.alert("错误提示： " + xhr.status + " " + xhr.statusText);
			}
		});
		var _iframe = document.getElementById('main_frame').contentWindow;
		var _div = _iframe.document.getElementById(loadBody);

		// 		$(_div).html(htmlobj.responseText);
		$(_div).load(local + "?t=" + (new Date()).getTime().toString());

		// 		var _iframe = document.getElementById('main_frame').contentWindow;
		// 		var _div = _iframe.document.getElementById(loadBody);

		// 		var iframe = "<iframe id='page_frame' name='page_frame' width='100%' height='100%' border='0' frameborder='0' scrolling='auto' src='"
		// 				+ local
		// 				+ "?t="
		// 				+ (new Date()).getTime().toString()
		// 				+ "'></iframe>"; 

		// 		$(_div).html(iframe);

	}

	$('#layui-body').on('scroll', function() {
		var showflag = 100;
		if ($('#layui-body').scrollTop() >= showflag) {
			$(".layui-fixbar").css("display", "block");
		} else {
			$(".layui-fixbar").css("display", "none");
		}
	});

	function backtoTop() {
		$("#layui-body").animate({
			scrollTop : 0
		}, 200);
	}
</script>
</html>